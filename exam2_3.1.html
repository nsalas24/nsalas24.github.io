<!DOCTYPE html>
<html lang="en">
<style>
table{
  border-spacing: 0;
  border-collapse: collapse;
}
th{
  width: 140px;
  border: 1.5px solid #cccccc;
  background-color:#efefef; 
  text-align: right;
  padding-right: 5px;
  font-family: Helvetica;
}
td{
  border: 1px solid #cccccc;
  text-align: right;
  padding-right: 5px;
}
tr:hover{
background-color: yellow;
}
</style>
	<head>
	<script src="http://d3js.org/d3.v3.min.js"></script>
		<meta charset="utf-8">
		<title>Question 3.1</title>	
	</head>
	<body>
		<h1 style="text-align:center; font-family: Helvetica">Exam 2: Question 3.1</h1>
		<h4 style="text-align:center; font-family: Helvetica">By: Noah Salas</h4>

		<script type="text/javascript">
		// a lot of my code came from: http://bl.ocks.org/d3noob/473f0cf66196a008cf99
		var colorcheck=0;
			d3.json("https://hivelab.org/static/exam2.json", function(data) {
		    		headers =data[0];
						
		function tabulate(data, columns) {
		var table = d3.select("body").append("table")
            .attr("style", "margin: 0px auto"),  //positions the table
        thead = table.append("thead"),
        tbody = table.append("tbody");

    // append the header row
    thead.append("tr")
        .selectAll("th")
        .data(columns)
        .enter()
        .append("th")
            .text(function(column) { return column; });

    // create a row for each object in the data
    var rows = tbody.selectAll("tr")
        .data(data)
        .enter()
        .append("tr")
		.on("mouseover", function(d, i){
			if(this.style.background==="rgb(0, 102, 0)"){
				d3.select(this).style({"background":"#069F06"});
				colorcheck=2;}
			else{
     					d3.select(this).style({"background":"yellow"});}
     				})
		.on("click",function(d, i){
			console.log("click");
			colorcheck=1;
			d3.selectAll("tr").style({"background": "white"});
     					d3.select(this).style({"background": "#006600"});
     				})
		.on("mouseout", function(d, i){
		console.log(this.style.background);
			if(colorcheck===1){colorcheck=0;}
			else if(colorcheck===2){d3.select(this).style({"background": "#006600"});colorcheck=0;}
			else{
				colorcheck=0;
     			d3.select(this).style({"background": "white"});}
     				})


    // create a cell in each row for each column
    var cells = rows.selectAll("td")
        .data(function(row) {
            return columns.map(function(column) {
                return {column: column, value: row[column]};
            });
        })
        .enter()
        .append("td")
        .attr("style", "font-family: Helvetica") // sets the font style
            .html(function(d) { return d.value; });
    
    return table;
}

		// render the table
		var peopleTable = tabulate(data, Object.keys(headers));
		
});
		</script>
	</body>
</html>